<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cafeteria Adminbereich ‚Äì Modern</title>

<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
/* ========================================================= */
/* ===============   MODERN THEME VARIABLES   =============== */
/* ========================================================= */
:root {
  --accent: #9be64d;
  --accent2: #b6ffa0;
  --accent-hover: #c8ff80;
  --danger: #ff6b6b;
  --warning: #ffb84d;

  --text-main: #ffffff;
  --text-dim: #cccccc;

  --glass-bg: rgba(255, 255, 255, 0.08);
  --glass-bg-heavy: rgba(255, 255, 255, 0.12);

  --blur-amount: 30px;
  --sidebar-width: 250px;
}

* {
  margin: 0; padding: 0; box-sizing: border-box;
  font-family: "Outfit", sans-serif;
}

body {
  background: radial-gradient(circle at 20% 20%, #0e150b, #020202 80%);
  min-height: 100vh;
  color: var(--text-main);
  display: flex;
  overflow-x: hidden;
}

/* ========================================================= */
/* ========================= SIDEBAR ======================== */
/* ========================================================= */
.sidebar {
  width: var(--sidebar-width);
  background: var(--glass-bg);
  backdrop-filter: blur(var(--blur-amount));
  position: fixed;
  height: 100%;
  padding-top: 40px;
  display: flex;
  flex-direction: column;
  align-items: center;
  border-right: 1px solid rgba(255,255,255,0.12);
  box-shadow: inset -1px 0 20px rgba(255,255,255,0.05);
}

.logo {
  font-size: 1.9rem;
  font-weight: 700;
  margin-bottom: 40px;
  color: var(--accent);
  text-shadow: 0 0 15px rgba(155, 230, 77, 0.6);
}

.sidebar button {
  width: 85%;
  padding: 14px 22px;
  margin-bottom: 12px;
  border: none;
  border-radius: 12px;
  background: transparent;
  color: var(--text-main);
  font-size: 1.05rem;
  text-align: left;
  transition: 0.25s;
  cursor: pointer;
}

.sidebar button:hover,
.sidebar button.active {
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  color: #101510;
  transform: scale(1.05);
  box-shadow: 0 0 15px rgba(155, 230, 77, 0.4);
}

.logout-btn {
  margin-top: auto;
  margin-bottom: 30px;
  width: 85%;
  padding: 12px 22px;
  border-radius: 12px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  border: none;
  cursor: pointer;
  color: #0c0f0c;
  font-weight: 700;
  transition: .25s;
}
.logout-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 0 25px rgba(155,230,77,0.8);
}

/* ========================================================= */
/* ========================= CONTENT ======================== */
/* ========================================================= */
.main-content {
  flex: 1;
  padding: 40px;
  margin-left: var(--sidebar-width);
}

.topbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 40px;
}

.topbar h1 {
  font-size: 2.6rem;
  color: var(--accent);
  text-shadow: 0 0 20px rgba(155,230,77,0.4);
}

/* SEARCH */
.search-box input {
  width: 260px;
  padding: 14px 18px;
  border-radius: 14px;
  background: var(--glass-bg);
  color: var(--text-main);
  border: 1px solid rgba(255,255,255,0.2);
  transition: .25s;
}
.search-box input:focus {
  background: var(--glass-bg-heavy);
  border-color: var(--accent);
  box-shadow: 0 0 15px rgba(155,230,77,0.4);
}

/* ========================================================= */
/* ===================== DASHBOARD CARDS ==================== */
/* ========================================================= */
.cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px,1fr));
  gap: 25px;
}

.card {
  padding: 30px;
  border-radius: 18px;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--blur-amount));
  border: 1px solid rgba(255,255,255,0.15);
  text-align: center;
  transition: 0.25s;
  box-shadow: 0 15px 30px rgba(0,0,0,0.35),
              inset 0 0 25px rgba(255,255,255,0.04);
}
.card:hover {
  transform: translateY(-6px) scale(1.03);
  box-shadow: 0 18px 35px rgba(0,0,0,0.5);
}

.card-icon {
  font-size: 2.2rem;
  margin-bottom: 10px;
  opacity: 0.9;
}

.card h3 { color: var(--text-dim); margin-bottom: 12px; }
.card p {
  font-size: 2.2rem;
  font-weight: 700;
  color: var(--accent);
}

/* ========================================================= */
/* ====================== TABLES + SECTIONS ================= */
/* ========================================================= */
.section {
  background: var(--glass-bg);
  backdrop-filter: blur(var(--blur-amount));
  padding: 30px;
  margin-top: 40px;
  border-radius: 18px;
  box-shadow: 0 15px 30px rgba(0,0,0,0.4),
              inset 0 0 25px rgba(255,255,255,0.03);
}

.section h2 {
  color: var(--accent);
  margin-bottom: 20px;
  font-size: 1.6rem;
}

table {
  width: 100%;
  border-collapse: collapse;
  color: var(--text-main);
}
th, td {
  padding: 14px;
  text-align: left;
  border-bottom: 1px solid rgba(255,255,255,0.15);
}
tr:hover {
  background: rgba(255,255,255,0.05);
}

.action-btn {
  padding: 8px 16px;
  border-radius: 10px;
  border: none;
  font-weight: 600;
  cursor: pointer;
  font-size: 0.9rem;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  color: #121512;
  transition: .25s;
}
.action-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 0 15px rgba(155,230,77,0.4);
}

/* ========================================================= */
/* ========================== POPUP ========================= */
/* ========================================================= */
#popup {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  backdrop-filter: blur(4px);
  justify-content: center;
  align-items: center;
  z-index: 99999;
  animation: fadeIn .3s ease-out;
}
#popup.show { display: flex; }

@keyframes fadeIn {
  from { opacity: 0; } to { opacity: 1; }
}

#popup-content-box {
  background: var(--glass-bg-heavy);
  padding: 30px;
  width: 420px;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.2);
  backdrop-filter: blur(25px);
  box-shadow: 0 15px 40px rgba(0,0,0,0.6);
  animation: slideUp .3s ease-out;
}
@keyframes slideUp {
  from { transform: translateY(25px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

#popup-title {
  font-size: 1.4rem;
  margin-bottom: 15px;
  color: var(--accent);
}

#popup-close {
  position: absolute;
  margin-left: 360px;
  margin-top: -10px;
  cursor: pointer;
  font-size: 1.4rem;
  color: var(--text-dim);
}

.form-input {
  width: 100%;
  padding: 12px;
  margin-top: 6px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(255,255,255,0.06);
  color: var(--text-main);
  margin-bottom: 20px;
}

/* TOGGLE SWITCH */
.switch { position: relative; width: 50px; height: 26px; display: inline-block; }
.switch input { display: none; }

.slider {
  position: absolute;
  cursor: pointer;
  inset: 0;
  background: rgba(255,255,255,0.2);
  border-radius: 30px;
  transition: .3s;
}
.slider:before {
  content:"";
  position:absolute;
  height:20px;
  width:20px;
  left:3px;
  top:3px;
  background:white;
  border-radius:50%;
  transition:.3s;
}
input:checked + .slider {
  background: var(--accent);
}
input:checked + .slider:before {
  transform: translateX(24px);
}

</style>
</head>
<body>

<!-- ======================================================== -->
<!--                       SIDEBAR                             -->
<!-- ======================================================== -->
<div class="sidebar">
  <div class="logo">‚òï Admin</div>

  <button onclick="showPage('dashboard')" class="active">üìä Dashboard</button>
  <button onclick="showPage('orders')">üßæ Bestellungen</button>
  <button onclick="showPage('menu')">üçï Men√ºverwaltung</button>
  <button onclick="showPage('stats')">üìà Statistiken</button>

  <button class="logout-btn">Abmelden</button>
</div>


<!-- ======================================================== -->
<!--                       MAIN CONTENT                        -->
<!-- ======================================================== -->
<div class="main-content">

    <div class="topbar">
        <h1>Admin-Dashboard</h1>
        <div class="search-box">
            <input id="search-input" placeholder="Suchen..." />
        </div>
    </div>

    <!-- DASHBOARD -->
    <div id="dashboard">
        <div class="cards">

            <div class="card">
                <div class="card-icon">üì¶</div>
                <h3>Gesamtbestellungen</h3>
                <p id="total-orders">0</p>
            </div>

            <div class="card">
                <div class="card-icon">‚è≥</div>
                <h3>Offene Bestellungen</h3>
                <p id="open-orders">0</p>
            </div>

            <div class="card">
                <div class="card-icon">üë§</div>
                <h3>Benutzer</h3>
                <p id="total-users">92</p>
            </div>

            <div class="card">
                <div class="card-icon">üçΩÔ∏è</div>
                <h3>Gerichte</h3>
                <p id="total-dishes">0</p>
            </div>

        </div>
    </div>

    <!-- BESTELLUNGEN -->
    <div id="orders" style="display:none;">
        <div class="section">
            <h2>Letzte Bestellungen</h2>

            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Benutzer</th>
                        <th>Gericht</th>
                        <th>Menge</th>
                        <th>Status</th>
                        <th>Aktion</th>
                    </tr>
                </thead>
                <tbody id="orders-table-body"></tbody>
            </table>
        </div>
    </div>

    <!-- MEN√ú -->
    <div id="menu" style="display:none;">
        <div class="section">
            <h2>Men√ºverwaltung</h2>

            <button class="action-btn" onclick="addMenuItem()" style="margin-bottom:20px;">
                + Neues Gericht hinzuf√ºgen
            </button>

            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Gericht</th>
                        <th>Preis</th>
                        <th>Verf√ºgbar</th>
                        <th>Aktionen</th>
                    </tr>
                </thead>
                <tbody id="menu-table-body"></tbody>
            </table>

        </div>
    </div>

    <!-- STATISTIKEN -->
    <div id="stats" style="display:none;">
        <div class="section">
            <h2>Statistiken</h2>

            <canvas id="ordersChart" height="180"></canvas>
            <canvas id="menuChart" height="180" style="margin-top:35px;"></canvas>
        </div>
    </div>

</div>


<!-- ======================================================== -->
<!--                       POPUP WINDOWS                       -->
<!-- ======================================================== -->
<div id="popup">
  <div id="popup-content-box">
      <span id="popup-close" onclick="closePopup()">‚úñ</span>
      <h3 id="popup-title"></h3>
      <div id="popup-content"></div>
  </div>
</div>


<!-- ======================================================== -->
<!--                       JAVASCRIPT                          -->
<!-- ======================================================== -->
<script>

/* ========================================== */
/*              SEITENWECHSEL                 */
/* ========================================== */
function showPage(id) {
    ["dashboard","orders","menu","stats"]
        .forEach(p => document.getElementById(p).style.display = "none");

    document.getElementById(id).style.display = "block";

    document.querySelectorAll(".sidebar button")
        .forEach(btn => btn.classList.remove("active"));

    document.querySelector(`.sidebar button[onclick="showPage('${id}')"]`)
        .classList.add("active");
}


/* ========================================== */
/*                 DEMODATEN                  */
/* ========================================== */

let orders = [
  {id:1023,user:"max@schule.de",dish:"Pizza Salami",amount:2,status:"Fertig"},
  {id:1024,user:"lisa@schule.de",dish:"Veggie Wrap",amount:1,status:"In Bearbeitung"},
  {id:1025,user:"tom@schule.de",dish:"Lasagne",amount:3,status:"Storniert"},
  {id:1026,user:"anna@schule.de",dish:"Pizza Margherita",amount:1,status:"Fertig"},
  {id:1027,user:"peter@schule.de",dish:"Gem√ºse-Curry",amount:2,status:"In Bearbeitung"},
  {id:1028,user:"sophie@schule.de",dish:"Pasta Bolognese",amount:1,status:"Fertig"}
];

let menuItems = [
  {id:1,name:"Pizza Margherita",price:"6.50 ‚Ç¨",available:true},
  {id:2,name:"Pasta Bolognese",price:"7.20 ‚Ç¨",available:true},
  {id:3,name:"Gem√ºse-Curry",price:"6.80 ‚Ç¨",available:false},
  {id:4,name:"Salat Bowl",price:"5.50 ‚Ç¨",available:true},
  {id:5,name:"Burger Veggie",price:"6.90 ‚Ç¨",available:true}
];


/* ========================================== */
/*               DASHBOARD INFO               */
/* ========================================== */
function updateDashboard() {
    document.getElementById("total-orders").textContent = orders.length;
    document.getElementById("open-orders").textContent =
        orders.filter(o => o.status === "In Bearbeitung").length;
    document.getElementById("total-dishes").textContent = menuItems.length;
}


/* ========================================== */
/*             RENDER: BESTELLUNGEN           */
/* ========================================== */
function renderOrders() {
    const tbody = document.getElementById("orders-table-body");
    tbody.innerHTML = "";

    orders.forEach(o => {
        tbody.innerHTML += `
          <tr>
              <td>#${o.id}</td>
              <td>${o.user}</td>
              <td>${o.dish}</td>
              <td>${o.amount}</td>
              <td>${o.status}</td>
              <td>
                <button class="action-btn" onclick="deleteOrder(${o.id})">L√∂schen</button>
              </td>
          </tr>`;
    });
}


/* ========================================== */
/*                 RENDER: MEN√ú               */
/* ========================================== */
function renderMenu() {
    const tbody = document.getElementById("menu-table-body");
    tbody.innerHTML = "";

    menuItems.forEach(m => {
        tbody.innerHTML += `
          <tr>
              <td>${m.id}</td>
              <td>${m.name}</td>
              <td>${m.price}</td>
              <td>${m.available ? "‚úÖ" : "‚ùå"}</td>
              <td>
                <button class="action-btn" onclick="editMenu(${m.id})">Bearbeiten</button>
                <button class="action-btn" onclick="deleteMenu(${m.id})">L√∂schen</button>
              </td>
          </tr>`;
    });
}


/* ========================================== */
/*                POPUP FUNKTIONEN            */
/* ========================================== */
function openPopup(title, contentHTML) {
    document.getElementById("popup-title").textContent = title;
    document.getElementById("popup-content").innerHTML = contentHTML;
    document.getElementById("popup").classList.add("show");
}

function closePopup() {
    document.getElementById("popup").classList.remove("show");
}


/* ========================================== */
/*            BESTELLUNG L√ñSCHEN              */
/* ========================================== */
function deleteOrder(id) {
    openPopup("Bestellung l√∂schen", `
      <p>M√∂chtest du die Bestellung <b>#${id}</b> wirklich l√∂schen?</p>
      <button class="action-btn" onclick="confirmDeleteOrder(${id})">Ja, l√∂schen</button>
    `);
}
function confirmDeleteOrder(id) {
    orders = orders.filter(o => o.id !== id);
    renderOrders();
    updateDashboard();
    closePopup();
}


/* ========================================== */
/*              MEN√ú FUNKTIONEN               */
/* ========================================== */
function addMenuItem() {
    const newId = menuItems.length ? Math.max(...menuItems.map(x => x.id)) + 1 : 1;

    openPopup("Neues Gericht hinzuf√ºgen", `
        <label>Gericht</label>
        <input class="form-input" id="new-name">

        <label>Preis (‚Ç¨)</label>
        <input class="form-input" id="new-price">

        <label>Verf√ºgbar</label>
        <label class="switch">
            <input type="checkbox" id="new-avail">
            <span class="slider"></span>
        </label><br><br>

        <button class="action-btn" onclick="confirmAddMenu(${newId})">Hinzuf√ºgen</button>
    `);
}

function confirmAddMenu(id) {
    menuItems.push({
        id,
        name: document.getElementById("new-name").value,
        price: document.getElementById("new-price").value,
        available: document.getElementById("new-avail").checked
    });
    renderMenu();
    updateDashboard();
    closePopup();
}


function editMenu(id) {
    const item = menuItems.find(x => x.id === id);

    openPopup("Gericht bearbeiten", `
        <label>Name</label>
        <input class="form-input" id="edit-name" value="${item.name}">

        <label>Preis</label>
        <input class="form-input" id="edit-price" value="${item.price}">

        <label>Verf√ºgbar</label>
        <label class="switch">
            <input type="checkbox" id="edit-avail" ${item.available ? "checked" : ""}>
            <span class="slider"></span>
        </label><br><br>

        <button class="action-btn" onclick="saveMenu(${id})">Speichern</button>
    `);
}

function saveMenu(id) {
    const item = menuItems.find(x => x.id === id);

    item.name = document.getElementById("edit-name").value;
    item.price = document.getElementById("edit-price").value;
    item.available = document.getElementById("edit-avail").checked;

    renderMenu();
    closePopup();
}

function deleteMenu(id) {
    openPopup("Gericht l√∂schen", `
        <p>Soll das Gericht mit <b>ID ${id}</b> gel√∂scht werden?</p>
        <button class="action-btn" onclick="confirmDeleteMenu(${id})">L√∂schen</button>
    `);
}
function confirmDeleteMenu(id) {
    menuItems = menuItems.filter(x => x.id !== id);
    renderMenu();
    updateDashboard();
    closePopup();
}


/* ========================================== */
/*             LIVE-SUCHE FUNKTION            */
/* ========================================== */
document.getElementById("search-input").addEventListener("input", function() {
    const term = this.value.toLowerCase();
    const filtered = orders.filter(o =>
        o.user.toLowerCase().includes(term) ||
        o.dish.toLowerCase().includes(term)
    );
    renderFilteredOrders(filtered);
});

function renderFilteredOrders(list) {
    const tbody = document.getElementById("orders-table-body");
    tbody.innerHTML = "";
    list.forEach(o => {
        tbody.innerHTML += `
        <tr>
            <td>#${o.id}</td>
            <td>${o.user}</td>
            <td>${o.dish}</td>
            <td>${o.amount}</td>
            <td>${o.status}</td>
            <td><button class="action-btn" onclick="deleteOrder(${o.id})">L√∂schen</button></td>
        </tr>`;
    });
}


/* ========================================== */
/*          STATISTIKEN & CHARTS              */
/* ========================================== */
function initCharts() {

    /* Orders chart (Status) */
    const ctx1 = document.getElementById("ordersChart").getContext("2d");

    const statusCounts = {
        "Fertig": 0,
        "In Bearbeitung": 0,
        "Storniert": 0
    };

    orders.forEach(o => statusCounts[o.status]++);

    new Chart(ctx1, {
        type: "bar",
        data: {
            labels: Object.keys(statusCounts),
            datasets: [{
                backgroundColor: ["#9be64d", "#ffb84d", "#ff6b6b"],
                data: Object.values(statusCounts),
                borderRadius: 12,
                borderSkipped: false
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { display: false }
            },
            scales: {
                y: { beginAtZero: true, ticks: { color: "#ccc" } },
                x: { ticks: { color: "#ccc" } }
            }
        }
    });

    /* Menu availability chart */
    const ctx2 = document.getElementById("menuChart").getContext("2d");

    const available = menuItems.filter(m => m.available).length;
    const notAvailable = menuItems.length - available;

    new Chart(ctx2, {
        type: "doughnut",
        data: {
            labels: ["Verf√ºgbar", "Nicht verf√ºgbar"],
            datasets: [{
                backgroundColor: ["#9be64d", "#ff6b6b"],
                data: [available, notAvailable],
                borderWidth: 0
            }]
        },
        options: {
            cutout: "60%",
            plugins: {
                legend: {
                    labels: { color: "#ccc" }
                }
            }
        }
    });
}


/* ========================================== */
/*           INIT: RENDER + CHARTS            */
/* ========================================== */
renderOrders();
renderMenu();
updateDashboard();
initCharts();

</script>

</body>
</html>
