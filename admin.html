<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cafeteria Adminbereich</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root {
  --accent: #9be64d;
  --accent-hover: #b0ff64;
  --text-main: #ffffff;
  --text-dim: #cccccc;
  --glass-bg: rgba(255, 255, 255, 0.08);
  --blur-amount: 20px;
  --sidebar-width: 250px;
}
* {box-sizing:border-box;margin:0;padding:0;}
body {
  font-family:'Outfit',sans-serif;
  background: radial-gradient(circle at 20% 20%, #0c1a09, #030303 85%);
  color:var(--text-main);
  display:flex;
  min-height:100vh;
  overflow-x:hidden;
}
.sidebar {
  width: var(--sidebar-width);
  background: var(--glass-bg);
  backdrop-filter: blur(var(--blur-amount));
  border-right: 1px solid rgba(255, 255, 255, 0.1);
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 50px;
  box-shadow: inset -1px 0 15px rgba(255,255,255,0.05);
  position: fixed;
  height: 100%;
  transition:0.3s;
}
.logo {
  font-size: 1.8rem;
  color: var(--accent);
  font-weight: 700;
  text-shadow: 0 0 15px rgba(155,230,77,0.5);
  margin-bottom: 50px;
  text-align: center;
}
.sidebar button {
  width: 85%;
  background: transparent;
  border: none;
  color: var(--text-main);
  font-size: 1.05rem;
  font-weight: 500;
  text-align: left;
  padding: 14px 25px;
  margin-bottom: 12px;
  border-radius: 12px;
  transition: 0.3s;
  cursor: pointer;
}
.sidebar button:hover,
.sidebar button.active {
  background: linear-gradient(135deg, var(--accent), #7dd63c);
  color: #0a0a0a;
  transform: scale(1.05);
}
.logout-btn {
  margin-top: auto;
  margin-bottom: 40px;
  background: linear-gradient(135deg, var(--accent), #7dd63c);
  color: #0a0a0a;
  font-weight: 700;
  padding: 12px 25px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: 0.3s;
  box-shadow: 0 0 20px rgba(155,230,77,0.4);
}
.logout-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 0 30px rgba(155,230,77,0.7);
}
.main-content {
  flex:1;
  padding:50px;
  margin-left: var(--sidebar-width);
  transition:0.3s;
}
.topbar {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:50px;
}
.topbar h1 {
  font-size:2.5rem;
  color: var(--accent);
  text-shadow: 0 0 25px rgba(155,230,77,0.5);
}
.search-box input {
  background: rgba(255,255,255,0.07);
  border:1px solid rgba(255,255,255,0.15);
  padding:12px 16px;
  border-radius:15px;
  color:var(--text-main);
  outline:none;
  width:250px;
  transition:0.3s;
}
.search-box input:focus {
  border-color: var(--accent);
  box-shadow:0 0 15px rgba(155,230,77,0.3);
  background: rgba(255,255,255,0.12);
}
.cards {
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(220px,1fr));
  gap:25px;
  margin-bottom:50px;
}
.card {
  background: var(--glass-bg);
  backdrop-filter: blur(var(--blur-amount));
  border:1px solid rgba(255,255,255,0.15);
  padding:30px;
  border-radius:20px;
  text-align:center;
  box-shadow:0 10px 25px rgba(0,0,0,0.5), inset 0 0 20px rgba(255,255,255,0.05);
  transition:0.3s;
}
.card:hover {
  transform: translateY(-8px);
  box-shadow:0 12px 30px rgba(0,0,0,0.7);
}
.card h3 {color: var(--text-dim); font-weight:400;margin-bottom:15px;}
.card p {font-size:2rem;color:var(--accent); font-weight:700;margin:0;}
.section {
  background: var(--glass-bg);
  padding:35px;
  border-radius:20px;
  backdrop-filter: blur(var(--blur-amount));
  border:1px solid rgba(255,255,255,0.15);
  box-shadow:0 10px 30px rgba(0,0,0,0.5), inset 0 0 30px rgba(255,255,255,0.03);
  margin-bottom:50px;
}
.section h2 {color: var(--accent); font-weight:700;margin-bottom:25px;}
table {width:100%; border-collapse:collapse;color:var(--text-main);}
th, td {padding:14px 12px;border-bottom:1px solid rgba(255,255,255,0.15); text-align:left;}
th {color:var(--accent); font-weight:600;}
tr:hover {background: rgba(255,255,255,0.08);}
.action-btn {
  background: linear-gradient(135deg, var(--accent), #7dd63c);
  color:#0a0a0a;
  border:none;
  padding:8px 16px;
  border-radius:10px;
  font-weight:600;
  cursor:pointer;
  transition:0.3s;
  font-size:0.95rem;
}
.action-btn:hover {
  background: linear-gradient(135deg, var(--accent-hover), var(--accent));
  box-shadow:0 0 15px rgba(155,230,77,0.3);
  transform: scale(1.05);
}
#popup {
  position: fixed; top:0; left:0; width:100%; height:100%;
  background: rgba(0,0,0,0.6); display:none; justify-content:center; align-items:center; z-index:9999;
}
#popup.show {display:flex;}
#popup-content-box {
  background:#111; padding:25px; border-radius:15px; max-width:450px; width:95%;
  box-shadow:0 5px 25px rgba(0,0,0,0.7);
}
#popup-close {position:absolute; top:15px; right:25px; cursor:pointer; font-size:1.3rem;}
@media(max-width:900px){
  .sidebar{display:none;}
  .main-content{margin-left:0;padding:25px;}
}
</style>
</head>
<body>

<div class="sidebar">
  <div class="logo">‚òï Cafeteria Admin</div>
  <button onclick="showPage('dashboard')" class="active">üìä Dashboard</button>
  <button onclick="showPage('orders')">üßæ Bestellungen</button>
  <button onclick="showPage('menu')">üçï Men√ºverwaltung</button>
  <button onclick="showPage('stats')">üìà Statistiken</button>
  <button class="logout-btn">Abmelden</button>
</div>

<div class="main-content">
  <div class="topbar">
    <h1>Admin-Dashboard</h1>
    <div class="search-box">
      <input type="text" placeholder="Suchen..." id="search-input"/>
    </div>
  </div>

  <!-- Seiten -->
  <div id="dashboard">
    <div class="cards">
      <div class="card"><h3>Gesamtbestellungen</h3><p id="total-orders">248</p></div>
      <div class="card"><h3>Offene Bestellungen</h3><p id="open-orders">15</p></div>
      <div class="card"><h3>Benutzer</h3><p id="total-users">92</p></div>
      <div class="card"><h3>Gerichte</h3><p id="total-dishes">24</p></div>
    </div>
  </div>

  <div id="orders" style="display:none;">
    <div class="section">
      <h2>Letzte Bestellungen</h2>
      <table>
        <thead>
          <tr><th>ID</th><th>Benutzer</th><th>Gericht</th><th>Menge</th><th>Status</th><th>Aktion</th></tr>
        </thead>
        <tbody id="orders-table-body"></tbody>
      </table>
    </div>
  </div>

  <div id="menu" style="display:none;">
    <div class="section">
      <h2>Men√ºverwaltung</h2>
      <button class="action-btn" onclick="addMenuItem()" style="margin-bottom:20px;">+ Neues Gericht hinzuf√ºgen</button>
      <table>
        <thead><tr><th>ID</th><th>Gericht</th><th>Preis</th><th>Verf√ºgbar</th><th>Aktionen</th></tr></thead>
        <tbody id="menu-table-body"></tbody>
      </table>
    </div>
  </div>

  <div id="stats" style="display:none;">
    <div class="section">
      <h2>Statistiken</h2>
      <canvas id="ordersChart" height="180"></canvas>
      <canvas id="menuChart" height="180" style="margin-top:30px;"></canvas>
    </div>
  </div>

</div>

<!-- Popup -->
<div id="popup">
  <div id="popup-content-box">
    <span id="popup-close" onclick="closePopup()">‚úñ</span>
    <h3 id="popup-title"></h3>
    <div id="popup-content"></div>
  </div>
</div>

<script>
// ==========================
// Seitenwechsel
function showPage(id){
  ['dashboard','orders','menu','stats'].forEach(p=>document.getElementById(p).style.display='none');
  document.getElementById(id).style.display='block';
  document.querySelectorAll('.sidebar button').forEach(btn => btn.classList.remove('active'));
  document.querySelector(`.sidebar button[onclick="showPage('${id}')"]`).classList.add('active');
}

// ==========================
// Demo-Daten
let orders = [
  {id:1023,user:"max@schule.de",dish:"Pizza Salami",amount:2,status:"Fertig"},
  {id:1024,user:"lisa@schule.de",dish:"Veggie Wrap",amount:1,status:"In Bearbeitung"},
  {id:1025,user:"tom@schule.de",dish:"Lasagne",amount:3,status:"Storniert"},
  {id:1026,user:"anna@schule.de",dish:"Pizza Margherita",amount:1,status:"Fertig"},
  {id:1027,user:"peter@schule.de",dish:"Gem√ºse-Curry",amount:2,status:"In Bearbeitung"},
  {id:1028,user:"sophie@schule.de",dish:"Pasta Bolognese",amount:1,status:"Fertig"}
];
let menuItems = [
  {id:1,name:"Pizza Margherita",price:"6.50 ‚Ç¨",available:true},
  {id:2,name:"Pasta Bolognese",price:"7.20 ‚Ç¨",available:true},
  {id:3,name:"Gem√ºse-Curry",price:"6.80 ‚Ç¨",available:false},
  {id:4,name:"Salat Bowl",price:"5.50 ‚Ç¨",available:true},
  {id:5,name:"Burger Veggie",price:"6.90 ‚Ç¨",available:true}
];

// ==========================
// Render Funktionen
function renderOrders(){
  let tbody=document.getElementById("orders-table-body");
  tbody.innerHTML='';
  orders.forEach(o=>{
    tbody.innerHTML+=`<tr>
      <td>#${o.id}</td>
      <td>${o.user}</td>
      <td>${o.dish}</td>
      <td>${o.amount}</td>
      <td>${o.status}</td>
      <td><button class="action-btn" onclick="deleteOrder(${o.id})">L√∂schen</button></td>
    </tr>`;
  });
}
function renderMenu(){
  let tbody=document.getElementById("menu-table-body");
  tbody.innerHTML='';
  menuItems.forEach(m=>{
    tbody.innerHTML+=`<tr>
      <td>${m.id}</td>
      <td>${m.name}</td>
      <td>${m.price}</td>
      <td>${m.available?'‚úÖ':'‚ùå'}</td>
      <td>
        <button class="action-btn" onclick="editMenu(${m.id})">Bearbeiten</button>
        <button class="action-btn" onclick="deleteMenu(${m.id})">L√∂schen</button>
      </td>
    </tr>`;
  });
}
renderOrders();
renderMenu();

// ==========================
// Popup Funktionen
function openPopup(title,contentHTML){
  document.getElementById("popup-title").textContent=title;
  document.getElementById("popup-content").innerHTML=contentHTML;
  document.getElementById("popup").classList.add("show");
}
function closePopup(){
  document.getElementById("popup").classList.remove("show");
}

// ==========================
// Bestellungen l√∂schen
function deleteOrder(id){
  openPopup("Bestellung l√∂schen",
    `<p>Willst du die Bestellung <b>#${id}</b> l√∂schen?</p>
     <button class='action-btn' onclick='confirmDeleteOrder(${id})'>Ja</button>` 
  );
}
function confirmDeleteOrder(id){
  orders=orders.filter(o=>o.id!==id);
  renderOrders();
  closePopup();
}

// ==========================
// Men√º bearbeiten/l√∂schen/hinzuf√ºgen
function editMenu(id){
  let item=menuItems.find(x=>x.id===id);
  openPopup("Gericht bearbeiten",
    `<label>Name</label><br>
     <input id='edit-name' value='${item.name}'><br><br>
     <label>Preis</label><br>
     <input id='edit-price' value='${item.price}'><br><br>
     <label>Verf√ºgbar</label>
     <input type='checkbox' id='edit-avail' ${item.available?'checked':''}><br><br>
     <button class='action-btn' onclick='saveMenu(${id})'>Speichern</button>`
  );
}
function saveMenu(id){
  let item=menuItems.find(x=>x.id===id);
  item.name=document.getElementById("edit-name").value;
  item.price=document.getElementById("edit-price").value;
  item.available=document.getElementById("edit-avail").checked;
  renderMenu();
  closePopup();
}
function deleteMenu(id){
  openPopup("Gericht l√∂schen",
    `<p>Soll Gericht <b>ID ${id}</b> gel√∂scht werden?</p>
     <button class='action-btn' onclick='confirmDeleteMenu(${id})'>Ja</button>`
  );
}
function confirmDeleteMenu(id){
  menuItems=menuItems.filter(x=>x.id!==id);
  renderMenu();
  closePopup();
}
function addMenuItem(){
  let newId=menuItems.length?Math.max(...menuItems.map(x=>x.id))+1:1;
  openPopup("Neues Gericht hinzuf√ºgen",
    `<label>Name</label><br>
     <input id='new-name'><br><br>
     <label>Preis</label><br>
     <input id='new-price'><br><br>
     <label>Verf√ºgbar</label>
     <input type='checkbox' id='new-avail'><br><br>
     <button class='action-btn' onclick='confirmAddMenu(${newId})'>Hinzuf√ºgen</button>`
  );
}
function confirmAddMenu(id){
  menuItems.push({
    id:id,
    name:document.getElementById("new-name").value,
    price:document.getElementById("new-price").value,
    available:document.getElementById("new-avail").checked
  });
  renderMenu();
  closePopup();
}

// ==========================
// Charts
function initCharts(){
  const ctx1=document.getElementById("ordersChart").getContext("2d");
  const statusCounts = {Fertig:0, "In Bearbeitung":0, Storniert:0};
  orders.forEach(o => statusCounts[o.status]++);
  
  new Chart(ctx1,{
    type:'bar',
    data:{
      labels:Object.keys(statusCounts),
      datasets:[{label:'Bestellungen',data:Object.values(statusCounts),backgroundColor:['#9be64d','orange','#ff6b6b']}]
    },
    options:{responsive:true,plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}}
  });

  const ctx2=document.getElementById("menuChart").getContext("2d");
  const availableCount = menuItems.filter(m=>m.available).length;
  const unavailableCount = menuItems.length - availableCount;
  
  new Chart(ctx2,{
    type:'pie',
    data:{
      labels:['Verf√ºgbar','Nicht verf√ºgbar'],
      datasets:[{label:'Gerichte',data:[availableCount, unavailableCount],backgroundColor:['#9be64d','#ff6b6b']}]
    },
    options:{responsive:true}
  });
}
initCharts();

</script>
</body>
</html>
